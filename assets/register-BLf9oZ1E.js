import"./all-DcTbhZgf.js";import"./main-BX2b4uAz.js";import{a as r}from"./axios-CCb-kr4I.js";$("#form").submit(function(o){o.preventDefault();var t=new FormData(this),e=Object.fromEntries(t);r.post("http://localhost:8080/member/register",e).then(a=>{a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("emailid",a.data.emailid),alert("註冊成功!請更新會員資料。"),window.location.href="member_personaldata.html")}).catch(a=>{console.error("註冊錯誤:",a),a.response&&a.response.data?alert(a.response.data.message):alert("註冊失敗，請稍後再試。")})});function i(o){var t=o.split(".")[1],e=t.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(e).split("").map(function(l){return"%"+("00"+l.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(a)}window.handleCallback=function(o){const t=i(o.credential);r.post("http://localhost:8080/member/Googleregister",{data:t}).then(e=>{e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("emailid",e.data.emailid),alert(e.data.message),window.location.href="member_personaldata.html")}).catch(e=>{console.error("註冊失敗:",e),alert(e.response.data.message)})};$(".lineloginbtn").click(function(){let o="2006514534",t="http://localhost:5173/chill-around-project/pages/register.html",e="https://access.line.me/oauth2/v2.1/authorize?";e+="response_type=code",e+="&client_id="+o,e+="&redirect_uri="+t,e+="&state=login",e+="&scope=profile%20openid%20email",window.location.href=e});$(document).ready(async function(){const t=new URLSearchParams(window.location.search).get("code");if(t)try{const e=await r.post("http://localhost:8080/member/Lineregister",{code:t});e.data.token?(localStorage.setItem("token",e.data.token),localStorage.setItem("emailid",e.data.emailid),localStorage.setItem("Lineid",e.data.Lineid),alert("Line 註冊成功！請更新會員資料。"),window.location.href="member_personaldata.html"):alert(e.data.message||"註冊失敗")}catch(e){console.error("註冊失敗:",e),alert(e.response.data.message),window.location.href="register.html"}});
