import"./all-DcTbhZgf.js";import{a as m}from"./axios-CCb-kr4I.js";const r=localStorage.getItem("scheduleId");console.log("皮卡：目前從 localStorage 取得: ------- ",r);m.get("http://localhost:8080/item/popupItem").then(l=>{if(Array.isArray(l.data.itemCategories)&&Array.isArray(l.data.itemdetails)){const t=document.querySelector(".categoryDiv");t.innerHTML="";const o={};l.data.itemdetails.forEach(e=>{o[e.Icategory_id]||(o[e.Icategory_id]=[]),o[e.Icategory_id].push(e.ItemDetails)}),l.data.itemCategories.forEach(e=>{const a=o[e.Icategory_id]||[];t.innerHTML+=`
                <div class="category" data-value="${e.Icategory_id}" data-details='${JSON.stringify(a)}'>${e.ItemName}</div>
                `})}let i=[],d="",s=[];const n=document.querySelectorAll(".category");n.forEach(t=>{t.addEventListener("click",()=>{const o=t.getAttribute("data-value"),e=JSON.parse(t.getAttribute("data-details"));console.log("Category Value:",o),console.log("Item Details:",e),i=[],s=[],n.forEach(c=>c.classList.remove("selected"));const a=t.textContent;i.push(a),s.push(e),t.classList.add("selected"),d=a,alert("選取"+a)})});const g=()=>{console.log(s),s.forEach((t,o)=>{console.log(`Detail Array ${o}:`,t),t.forEach(e=>{console.log(e);const a={sch_id:r,ItemName:d,ItemDetails:[e],PrepareStatus:"0"};console.log("Update Data:",a),m.post(`http://localhost:8080/item/Useritem/${r}`,a).then(c=>{console.log("新增成功",a)}).catch(c=>{console.error("更新失敗：",c)})})})};document.getElementById("okBtn").addEventListener("click",()=>{localStorage.setItem("selectedItemsId",JSON.stringify(i)),localStorage.setItem("selectedItemName",JSON.stringify(d)),localStorage.setItem("selectedDetails",JSON.stringify(s)),g(),window.location.href="./itemList.html"})});function I(){document.getElementById("overlay").classList.add("active"),document.getElementById("modal").classList.add("active")}document.addEventListener("DOMContentLoaded",I);
