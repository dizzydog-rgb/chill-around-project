import{a as l}from"./axios-CCb-kr4I.js";$("#form").submit(function(o){o.preventDefault();var t=new FormData(this),e=Object.fromEntries(t);l.post("http://localhost:8080/member/login",e).then(a=>{a.data.token&&(localStorage.setItem("token",a.data.token),localStorage.setItem("emailid",a.data.emailid),alert("登入成功!"),location.reload())}).catch(a=>{console.error("登入失敗:",a),a.response&&a.response.data?alert(a.response.data.message):alert("系統錯誤!")})});function i(o){var t=o.split(".")[1],e=t.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(e).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(a)}window.handleCallback=function(o){const t=i(o.credential);l.post("http://localhost:8080/member/Googlelogin",{data:t}).then(e=>{e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("emailid",e.data.emailid),alert(e.data.message),window.location.href="index.html")}).catch(e=>{console.error("Google 登入失敗:",e),alert(e.response.data.message)})};$(".lineloginbtn").click(function(){let o="2006514534",t="http://localhost:5173/chill-around-project/pages/index.html",e="https://access.line.me/oauth2/v2.1/authorize?";e+="response_type=code",e+="&client_id="+o,e+="&redirect_uri="+t,e+="&state=login",e+="&scope=profile%20openid%20email",window.location.href=e});$(document).ready(async function(){const t=new URLSearchParams(window.location.search).get("code");if(t)try{const e=await l.post("http://localhost:8080/member/Linelogin",{code:t});e.data.token&&(localStorage.setItem("token",e.data.token),localStorage.setItem("emailid",e.data.emailid),alert(e.data.message),window.location.href="index.html")}catch(e){console.error("Line 登入失敗:",e),alert(e.response.data.message)}});
