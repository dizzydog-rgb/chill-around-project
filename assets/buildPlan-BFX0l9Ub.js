import"./all-B7fgtTnm.js";import"./main-8UblBU7c.js";import{a as u}from"./axios-CCb-kr4I.js";async function p(){await customElements.whenDefined("gmp-map");const t=document.querySelector("gmp-map"),a=document.querySelector("gmp-advanced-marker"),o=document.querySelector("gmpx-place-picker"),c=new google.maps.InfoWindow,n=document.getElementById("select-city");t.innerMap.setOptions({mapTypeControl:!1}),o.addEventListener("gmpx-placechange",s),n.addEventListener("change",d);function s(){const e=o.value;if(!e.location){window.alert("No details available for input: '"+e.name+"'"),c.close(),a.position=null;return}i(e)}function d(){const e=n.value;new google.maps.places.PlacesService(t.innerMap).textSearch({query:e},(l,m)=>{if(m===google.maps.places.PlacesServiceStatus.OK&&l.length>0){const r=l[0];o.setInputValue&&o.setInputValue(r.name),i(r)}})}function i(e){e.geometry.viewport?t.innerMap.fitBounds(e.geometry.viewport):(t.center=e.geometry.location,t.zoom=17),a.position=e.geometry.location,c.setContent(`<strong style="font-size: 26px; color: #4A859F">${e.name}</strong>`),c.open(t.innerMap,a)}}document.addEventListener("DOMContentLoaded",p);document.querySelector(".btn-complete").addEventListener("click",function(){const t=document.querySelector("#planName").value,a=document.querySelector("#startDate").value,o=document.querySelector("#endDate").value,c=localStorage.getItem("emailid");u.post("http://localhost:8080/buildPlan/buildPlan",{sch_name:t,start_date:a,end_date:o,email_id:c}).then(function(n){console.log("旅行計畫已新增:",n.data),localStorage.setItem("scheduleId",n.data.data),window.location.href="editPlan.html"}).catch(function(n){console.log("新增旅行計畫時發生錯誤:",n)})});document.addEventListener("DOMContentLoaded",function(){setTimeout(()=>{localStorage.getItem("token")||(alert("請先登入會員"),window.location.href="index.html")},100)});
