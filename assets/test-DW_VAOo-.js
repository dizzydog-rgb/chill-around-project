import{a as q}from"./axios-CCb-kr4I.js";function oe(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var W={exports:{}};(function(m){(function(f){var l=ee(),F=te(),L=ne(),N=re(),U={imagePlaceholder:void 0,cacheBust:!1},b={toSvg:j,toPng:w,toJpeg:M,toBlob:Q,toPixelData:J,impl:{fontFaces:L,images:N,util:l,inliner:F,options:{}}};m.exports=b;function j(n,t){return t=t||{},z(t),Promise.resolve(n).then(function(i){return X(i,t.filter,!0)}).then(K).then(Y).then(r).then(function(i){return Z(i,t.width||l.width(n),t.height||l.height(n))});function r(i){return t.bgcolor&&(i.style.backgroundColor=t.bgcolor),t.width&&(i.style.width=t.width+"px"),t.height&&(i.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(u){i.style[u]=t.style[u]}),i}}function J(n,t){return V(n,t||{}).then(function(r){return r.getContext("2d").getImageData(0,0,l.width(n),l.height(n)).data})}function w(n,t){return V(n,t||{}).then(function(r){return r.toDataURL()})}function M(n,t){return t=t||{},V(n,t).then(function(r){return r.toDataURL("image/jpeg",t.quality||1)})}function Q(n,t){return V(n,t||{}).then(l.canvasToBlob)}function z(n){typeof n.imagePlaceholder>"u"?b.impl.options.imagePlaceholder=U.imagePlaceholder:b.impl.options.imagePlaceholder=n.imagePlaceholder,typeof n.cacheBust>"u"?b.impl.options.cacheBust=U.cacheBust:b.impl.options.cacheBust=n.cacheBust}function V(n,t){return j(n,t).then(l.makeImage).then(l.delay(100)).then(function(i){var u=r(n);return u.getContext("2d").drawImage(i,0,0),u});function r(i){var u=document.createElement("canvas");if(u.width=t.width||l.width(i),u.height=t.height||l.height(i),t.bgcolor){var c=u.getContext("2d");c.fillStyle=t.bgcolor,c.fillRect(0,0,u.width,u.height)}return u}}function X(n,t,r){if(!r&&t&&!t(n))return Promise.resolve();return Promise.resolve(n).then(i).then(function(o){return u(n,o,t)}).then(function(o){return c(n,o)});function i(o){return o instanceof HTMLCanvasElement?l.makeImage(o.toDataURL()):o.cloneNode(!1)}function u(o,a,y){var T=o.childNodes;if(T.length===0)return Promise.resolve(a);return g(a,l.asArray(T),y).then(function(){return a});function g(B,P,p){var E=Promise.resolve();return P.forEach(function(_){E=E.then(function(){return X(_,p)}).then(function(I){I&&B.appendChild(I)})}),E}}function c(o,a){if(!(a instanceof Element))return a;return Promise.resolve().then(y).then(T).then(g).then(B).then(function(){return a});function y(){P(window.getComputedStyle(o),a.style);function P(p,E){p.cssText?E.cssText=p.cssText:_(p,E);function _(I,A){l.asArray(I).forEach(function(e){A.setProperty(e,I.getPropertyValue(e),I.getPropertyPriority(e))})}}}function T(){[":before",":after"].forEach(function(p){P(p)});function P(p){var E=window.getComputedStyle(o,p),_=E.getPropertyValue("content");if(_===""||_==="none")return;var I=l.uid();a.className=a.className+" "+I;var A=document.createElement("style");A.appendChild(e(I,p,E)),a.appendChild(A);function e(s,d,h){var v="."+s+":"+d,x=h.cssText?H(h):O(h);return document.createTextNode(v+"{"+x+"}");function H(S){var C=S.getPropertyValue("content");return S.cssText+" content: "+C+";"}function O(S){return l.asArray(S).map(C).join("; ")+";";function C(D){return D+": "+S.getPropertyValue(D)+(S.getPropertyPriority(D)?" !important":"")}}}}}function g(){o instanceof HTMLTextAreaElement&&(a.innerHTML=o.value),o instanceof HTMLInputElement&&a.setAttribute("value",o.value)}function B(){a instanceof SVGElement&&(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a instanceof SVGRectElement&&["width","height"].forEach(function(P){var p=a.getAttribute(P);p&&a.style.setProperty(P,p)}))}}}function K(n){return L.resolveAll().then(function(t){var r=document.createElement("style");return n.appendChild(r),r.appendChild(document.createTextNode(t)),n})}function Y(n){return N.inlineAll(n).then(function(){return n})}function Z(n,t,r){return Promise.resolve(n).then(function(i){return i.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(i)}).then(l.escapeXhtml).then(function(i){return'<foreignObject x="0" y="0" width="100%" height="100%">'+i+"</foreignObject>"}).then(function(i){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+r+'">'+i+"</svg>"}).then(function(i){return"data:image/svg+xml;charset=utf-8,"+i})}function ee(){return{escape:B,parseExtension:t,mimeType:r,dataAsUrl:g,isDataUrl:i,canvasToBlob:c,resolveUrl:o,getAndEncode:T,uid:a(),delay:P,asArray:p,escapeXhtml:E,makeImage:y,width:_,height:I};function n(){var e="application/font-woff",s="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:s,jpeg:s,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var s=/\.([^\.\/]*?)$/g.exec(e);return s?s[1]:""}function r(e){var s=t(e).toLowerCase();return n()[s]||""}function i(e){return e.search(/^(data:)/)!==-1}function u(e){return new Promise(function(s){for(var d=window.atob(e.toDataURL().split(",")[1]),h=d.length,v=new Uint8Array(h),x=0;x<h;x++)v[x]=d.charCodeAt(x);s(new Blob([v],{type:"image/png"}))})}function c(e){return e.toBlob?new Promise(function(s){e.toBlob(s)}):u(e)}function o(e,s){var d=document.implementation.createHTMLDocument(),h=d.createElement("base");d.head.appendChild(h);var v=d.createElement("a");return d.body.appendChild(v),h.href=s,v.href=e,v.href}function a(){var e=0;return function(){return"u"+s()+e++;function s(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function y(e){return new Promise(function(s,d){var h=new Image;h.onload=function(){s(h)},h.onerror=d,h.src=e})}function T(e){var s=3e4;return b.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),new Promise(function(d){var h=new XMLHttpRequest;h.onreadystatechange=H,h.ontimeout=O,h.responseType="blob",h.timeout=s,h.open("GET",e,!0),h.send();var v;if(b.impl.options.imagePlaceholder){var x=b.impl.options.imagePlaceholder.split(/,/);x&&x[1]&&(v=x[1])}function H(){if(h.readyState===4){if(h.status!==200){v?d(v):S("cannot fetch resource: "+e+", status: "+h.status);return}var C=new FileReader;C.onloadend=function(){var D=C.result.split(/,/)[1];d(D)},C.readAsDataURL(h.response)}}function O(){v?d(v):S("timeout of "+s+"ms occured while fetching resource: "+e)}function S(C){console.error(C),d("")}})}function g(e,s){return"data:"+s+";base64,"+e}function B(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function P(e){return function(s){return new Promise(function(d){setTimeout(function(){d(s)},e)})}}function p(e){for(var s=[],d=e.length,h=0;h<d;h++)s.push(e[h]);return s}function E(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function _(e){var s=A(e,"border-left-width"),d=A(e,"border-right-width");return e.scrollWidth+s+d}function I(e){var s=A(e,"border-top-width"),d=A(e,"border-bottom-width");return e.scrollHeight+s+d}function A(e,s){var d=window.getComputedStyle(e).getPropertyValue(s);return parseFloat(d.replace("px",""))}}function te(){var n=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:u,shouldProcess:t,impl:{readUrls:r,inline:i}};function t(c){return c.search(n)!==-1}function r(c){for(var o=[],a;(a=n.exec(c))!==null;)o.push(a[1]);return o.filter(function(y){return!l.isDataUrl(y)})}function i(c,o,a,y){return Promise.resolve(o).then(function(g){return a?l.resolveUrl(g,a):g}).then(y||l.getAndEncode).then(function(g){return l.dataAsUrl(g,l.mimeType(o))}).then(function(g){return c.replace(T(o),"$1"+g+"$3")});function T(g){return new RegExp(`(url\\(['"]?)(`+l.escape(g)+`)(['"]?\\))`,"g")}}function u(c,o,a){if(y())return Promise.resolve(c);return Promise.resolve(c).then(r).then(function(T){var g=Promise.resolve(c);return T.forEach(function(B){g=g.then(function(P){return i(P,B,o,a)})}),g});function y(){return!t(c)}}}function ne(){return{resolveAll:n,impl:{readAll:t}};function n(){return t().then(function(r){return Promise.all(r.map(function(i){return i.resolve()}))}).then(function(r){return r.join(`
`)})}function t(){return Promise.resolve(l.asArray(document.styleSheets)).then(i).then(r).then(function(c){return c.map(u)});function r(c){return c.filter(function(o){return o.type===CSSRule.FONT_FACE_RULE}).filter(function(o){return F.shouldProcess(o.style.getPropertyValue("src"))})}function i(c){var o=[];return c.forEach(function(a){try{l.asArray(a.cssRules||[]).forEach(o.push.bind(o))}catch(y){console.log("Error while reading CSS rules from "+a.href,y.toString())}}),o}function u(c){return{resolve:function(){var a=(c.parentStyleSheet||{}).href;return F.inlineAll(c.cssText,a)},src:function(){return c.style.getPropertyValue("src")}}}}}function re(){return{inlineAll:t,impl:{newImage:n}};function n(r){return{inline:i};function i(u){return l.isDataUrl(r.src)?Promise.resolve():Promise.resolve(r.src).then(u||l.getAndEncode).then(function(c){return l.dataAsUrl(c,l.mimeType(r.src))}).then(function(c){return new Promise(function(o,a){r.onload=o,r.onerror=a,r.src=c})})}}function t(r){if(!(r instanceof Element))return Promise.resolve(r);return i(r).then(function(){return r instanceof HTMLImageElement?n(r).inline():Promise.all(l.asArray(r.childNodes).map(function(u){return t(u)}))});function i(u){var c=u.style.getPropertyValue("background");return c?F.inlineAll(c).then(function(o){u.style.setProperty("background",o,u.style.getPropertyPriority("background"))}).then(function(){return u}):Promise.resolve(u)}}}})()})(W);var ie=W.exports;const ae=oe(ie);let G={ESTJ:"http://localhost:8080/test/1",ESFJ:"http://localhost:8080/test/2",ENFJ:"http://localhost:8080/test/3",ENTJ:"http://localhost:8080/test/4",ISTJ:"http://localhost:8080/test/5",ISFJ:"http://localhost:8080/test/6",INFJ:"http://localhost:8080/test/7",INTJ:"http://localhost:8080/test/8",ESTP:"http://localhost:8080/test/9",ESFP:"http://localhost:8080/test/10",ENFP:"http://localhost:8080/test/11",ENTP:"http://localhost:8080/test/12",ISTP:"http://localhost:8080/test/13",ISFP:"http://localhost:8080/test/14",INFP:"http://localhost:8080/test/15",INTP:"http://localhost:8080/test/16"};$(".testQuestion1").hide();$(".testQuestion2").hide();$(".testQuestion3").hide();$(".testQuestion4").hide();$(".testQuestion5").hide();$(".testResult").hide();$(".enter").on("click",()=>{$(".testHomePage").hide(),$(".testQuestion1").fadeIn()});let R="",k=[];$(".btn1").on("click",()=>{const m=$("input[name='radio_1']:checked");if(m){const f=m.data("value");k[0]=f,R=k.join(""),$(".testQuestion1").hide(),$(".testQuestion2").fadeIn()}else alert("請選擇一個選項！")});$(".btn2").on("click",()=>{const m=$("input[name='radio_2']:checked");if(m){const f=m.data("value");k[3]=f,R=k.join(""),$(".testQuestion2").hide(),$(".testQuestion3").fadeIn()}else alert("請選擇一個選項！")});$(".btn3").on("click",()=>{const m=$("input[name='radio_3']:checked");if(m){const f=m.data("value");k[1]=f,R=k.join(""),$(".testQuestion3").hide(),$(".testQuestion4").fadeIn()}else alert("請選擇一個選項！")});$(".btn4").on("click",()=>{const m=$("input[name='radio_4']:checked");if(m){const f=m.data("value");k[2]=f,R=k.join(""),$(".testQuestion4").hide(),$(".testQuestion5").fadeIn()}else alert("請選擇一個選項！")});let se=()=>{$(".loadingAnimation").hide(),$(".result").fadeIn()};$(".btn5").on("click",()=>{$(".content").hide(),$(".testQuestion5").hide(),$(".testResult").fadeIn(()=>{setTimeout(se,3e3)}),console.log(R),G[R]&&q.get(G[R]).then(function(m){const f=m.data;console.log(f),console.log(f.result_style);const l=f.style_img.replace(/['"]/g,""),F=f.best_style_img.replace(/['"]/g,""),L=f.country_img.replace(/['"]/g,"");let N=`
                <h2 class="text-primary">你的旅行風格是...</h2>
                <!-- 角色 -->
                <div class="col-10 d-flex m-auto" id="resultStyle">
                    <div class="characterDes me-3">
                        <h2 class="text-secondary">${f.result_style}</h2>
                        <hr>
                        <p>${f.style_des}</p>
                    </div>
                        <img src="../assets/images/test/mbti/${l}">
                </div>
                <!-- 旅遊地 -->
                <div class="resultCountry card flex-row flex-wrap col-10 my-3 mx-auto">
                    <!-- 左邊的圖片 -->
                    <div class="col-4">
                        <img src="../assets/images/test/country/${L}" class="countryImg">
                    </div>
                            
                    <!-- 右邊的文字內容 -->
                    <div class="col-8 p-3">
                        <h4>最佳旅遊地:${f.country_name}</h4>
                        <hr>
                        <p>${f.country_des}</p>  
                    </div>
                </div>
                <!-- 標籤/旅伴 -->
                <div class="d-flex justify-content-between col-lg-8 col-sm-10 relativeInfo">
                    <!-- 適合標籤 -->
                    <div>
                        <h5>推薦旅遊標籤</h5>
                        <button class="btn btn-success m-1">#${f.style_tag_1}</button>
                        <br/>
                        <button class="btn btn-success m-1">#${f.style_tag_2}</button>
                    </div>
                    <!-- 最佳旅伴 -->
                    <div>
                        <h5>最佳旅伴</h5>
                        <img src="../assets/images/test/mbti/${F}" style="width: 150px; height: 150px;object-fit: cover;">
                    </div>
                </div>`;$("#mbtiType").html(N),q.get("http://localhost:8080/schInfo/getsch").then(U=>{const b=U.data;console.log("獲取到的資料:",b),console.log(b[0].sch_id);const j=U.data.filter(w=>w.tags.includes(f.style_tag_1||f.style_tag_2)).map(w=>({id:w.sch_id,sch:w.sch_name,photo:w.photo_one,tag:w.tags.replace(/,/g,"#")}));console.log(j),$("#schCard").html(""),$.each(j,function(){let w=`
                    <div class="card custom-card flex-row flex-wrap h-75 m-3" data-sch-id="${this.id}">
                        <!-- 左邊的圖片 -->
                        <div class="col-lg-4 col-md-4 col-sm-12">
                            <img src="${this.photo?"../assets/images/searchSite/"+this.photo:""}" class="custom-img" alt="Card image" style="display: ${this.photo?"block":"none"};">
                        </div>
                            
                        <!-- 右邊的文字內容 -->
                        <div class="col-lg-8 col-md-8 col-sm-12 custom-body">
                            <h4 class="p-3">${this.sch}</h4>
                            <hr>
                            <p class="p-3">#${this.tag}</p>
                            </div>
                        </div>`;$("#schCard").append(w)}),document.querySelectorAll(".card").forEach(w=>{w.addEventListener("click",M=>{const Q=M.currentTarget.getAttribute("data-sch-id");localStorage.setItem("selectedSchId",Q),console.log(Q),window.location.href="schCom.html"})})}).catch(function(U){console.log(U),console.log("請求失敗")})}).catch(function(m){console.log(m),console.log("請求失敗")})});document.getElementById("share").addEventListener("click",ce);function ce(){console.log("download success"),console.log(document.getElementById("mbtiType").innerHTML),ae.toSvg(document.getElementById("mbtiType"),{quality:.95,bgcolor:"white"}).then(function(m){var f=document.createElement("a");f.download="mytrip.svg",f.href=m,f.click()})}$(".testAgain").on("click",()=>{console.clear(),$(".testResult").hide(),$(".content").show(),$(".testHomePage").show()});
