<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        div{
            h1{
                color: blueviolet;
            }

        }
        #map{
            width: 1000px;
            height: 800px;
        }
    </style>
    
    
</head>
<body>
    <div>

  
    <h1>測試地圖串接</h1>
    <form id="locationForm">
        <label for="location">選擇地點:</label>
        <select id="location" name="location">
            <option value="taipei101">台北 101</option>
            <option value="eiffelTower">艾菲爾鐵塔</option>
            <option value="statueOfLiberty">自由女神像</option>
        </select>
        <button type="submit">顯示地圖</button>
    </form>
</div>
    <div id="map"></div>
    
    
    <script type="text/javascript">
        let map;
        let marker;
        let center;

        // 定義每個選項對應的經緯度
        const locations = {
            taipei101: { lat: 25.0330, lng: 121.5654 }, // 台北 101
            eiffelTower: { lat: 48.8584, lng: 2.2945 }, // 艾菲爾鐵塔
            statueOfLiberty: { lat: 40.6892, lng: -74.0445 } // 自由女神像
        };
        // 這段是你提供的 Google Maps API 加載程式碼
        (g => {
          var h, a, k, p = "The Google Maps JavaScript API", c = "google", l = "importLibrary", q = "__ib__", m = document, b = window;
          b = b[c] || (b[c] = {});
          var d = b.maps || (b.maps = {}),
              r = new Set(),
              e = new URLSearchParams,
              u = () => h || (h = new Promise(async (f, n) => {
                await (a = m.createElement("script"));
                e.set("libraries", [...r] + "");
                for (k in g) e.set(k.replace(/[A-Z]/g, t => "_" + t[0].toLowerCase()), g[k]);
                e.set("callback", c + ".maps." + q);
                a.src = `https://maps.${c}apis.com/maps/api/js?` + e;
                d[q] = f;
                a.onerror = () => h = n(Error(p + " could not load."));
                a.nonce = m.querySelector("script[nonce]")?.nonce || "";
                m.head.append(a);
              }));
          d[l] ? console.warn(p + " only loads once. Ignoring:", g) : d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n))
        })({
          key: "AIzaSyDMP0WUTPIwj9oi3SbbROwXL0STHfmKQuQ", // 替換為你的 API 金鑰
          v: "weekly",
        });
 
        
        async function initMap(){
            const {map} = await google.maps.importLibrary("maps");
            center = {
                lat:25.0374865,
                lng:121.5647688,
            };
            map = new google.maps.Map(document.getElementById("map"),{
                center :center,
                zoom : 14,
                mapId :"4504f8b37365c3d0",
            });
            // 初始化標記
            marker = new google.maps.Marker({
                position: center,
                map: map,
                title: '台北 101'
            });
        }
        initMap();
    // 在 API 成功加載後，呼叫地圖初始化函式
    window.google.maps.__ib__ = initMap;
    

    

    </script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDMP0WUTPIwj9oi3SbbROwXL0STHfmKQuQ&callback=initMap"
    async defer></script> -->
    
</body>
</html>